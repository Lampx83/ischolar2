<!doctype html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>

    <script src="./js/jsmind.js"></script>
    <script src="./js/jsmind.draggable.js"></script>
    <script src="./js/jsmind.screenshot.js"></script>
    <script src="./js/jquery.min.js"></script>
    <link type="text/css" rel="stylesheet" href="./css/jsmind.css"/>

    <link type="text/css" rel="stylesheet" href="https://cdn.datatables.net/1.11.4/css/jquery.dataTables.min.css"/>
    <link type="text/css" rel="stylesheet" href="https://cdn.datatables.net/scroller/2.0.5/css/scroller.dataTables.min.css"/>


    <link rel="stylesheet"
          href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
    <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link href="./css/bootstrap.css" rel="stylesheet"/>
    <link href="./css/main.css" rel="stylesheet"/>
    <link href="./css/login-register.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="./css/chat.css" rel="stylesheet"/>
    <script type="text/javascript" src="./js/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

</head>
<body>



<div class="row m-0">
    <div class="col-md-12 pt-5 pb-5">
        <table id="example" class="display" style="width:100%">
            <thead>
            <tr>
                <th>Quartile</th>
                <th>Title</th>
                <th>Category</th>
                <th>Publisher</th>
                <th>Cite Score</th>
            </tr>
            </thead>
            <tfoot>
            <tr>
                <th>Quartile</th>
                <th>Title</th>
                <th>Category</th>
                <th>Publisher</th>
                <th>Cite Score</th>
            </tr>
            </tfoot>
        </table>
    </div>
    <!--    <div class="col-md-3 bg-light border-left pt-2" id="rightpanel">-->
    <!--    </div>-->
</div>

<footer class="text-center text-lg-start bg-light text-muted">
    <!-- Section: Social media -->
    <section class="d-flex justify-content-center justify-content-lg-between p-2 border-top">
        <div class="container text-center text-md-start mt-4 mb-4">
            <!-- Grid row -->
            <div class="row">
                <!-- Grid column -->
                <div class="col-md-2">
                    <img src="../src/assets/images/graduation.svg" width="70" height="70" th:src="@{../images/graduation.svg}"/>
                    <h5>
                        iScholar
                    </h5>
                </div>

                <!-- Grid column -->
                <div class="row col-md-3 align-items-center"><i>"Helpful tool for brainstorming, planning, and
                    writing..."</i>
                </div>
                <!-- Grid column -->
                <div class="col-md-3">
                    <h6 class="text-uppercase fw-bold mb-4">Help</h6>
                    <a href="#!" class="text-reset">Paper</a></br>
                    <a href="#!" class="text-reset">Dissertation</a></br>
                </div>
                <!-- Grid column -->
                <div class="col-md-3">
                    <h6 class="text-uppercase fw-bold mb-4">Language </h6>
                    <a href="#!" class="text-reset">English</a></br>
                    <a href="#!" class="text-reset">Vietnamese</a></br>
                </div>
                <!-- Grid column -->
            </div>
            <!-- Grid row -->
        </div>
    </section>
    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.05);">Â© 2021 Copyright <a
            class="text-reset fw-bold" href="https://ischolar.com/">iScholar.com</a></div>
</footer>


<script> var page = "map" </script>


<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-firestore.js"></script>

<script src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/scroller/2.0.5/js/dataTables.scroller.min.js"></script>

<script src="./js/bootstrap.bundle.js"></script>
<!--<script src="./js/user.js"></script>-->
<!--<script src="./js/map.js"></script>-->
<!--<script src="./js/template.js"></script>-->

<script>
    function format(d) {
        let t = ["Quartile","Title", "Scopus Sub-Subject Area", "Publisher","CiteScore 2020", "E-ISSN", "Open Access", "Percent Cited", "Percentile",  "RANK", "SJR", "SNIP", "Scholarly Output", "Scopus ASJC Code (Sub-subject Area)", "Scopus Source ID", "Top 10% (CiteScore Percentile)", "URL Scopus Source ID", "Homepage", "Contact", "How_to_publish"]
        let s = "";

        for (let i = 4; i < d.length; i++) {
            if (d[i])
                s = s + t[i] + ': ' + d[i] + ' <br>'
        }

        return s

    }

    $(document).ready(function () {
        $('#example tfoot th').each(function () {
            var title = $(this).text();
            $(this).html('<input type="text" placeholder="Search ' + title + '" />');
        });
        const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
        });

        var dt = $('#example').DataTable({
            "processing": true,
            "serverSide": true,
            "ajax": {
               url: "https://vncodelab.com/api/v1/test?c=" + params.c,
              //  url: "https://localhost/api/v1/test?c=" + params.c,
                type: "POST",
                contentType: "application/json",
                data: function (d) {
                    return JSON.stringify(d)
                }
            },
            initComplete: function () {
                // Apply the search
                this.api().columns().every(function () {
                    var that = this;
                    $('input', this.footer()).on('keyup change', function (e) {
                        if (that.search() !== this.value) that.search(this.value);
                        // if serverside draw() only on enter
                        if (e.keyCode == 13) that.draw();
                    });
                });
            }
            //"ajax": "https://vncodelab.com/api/v1/test"
        });
        // Array to track the ids of the details displayed rows
        var detailRows = [];

        $('#example tbody').on('click', 'tr td', function () {
            var tr = $(this).closest('tr');
            var row = dt.row(tr);
            var idx = $.inArray(tr.attr('id'), detailRows);

            if (row.child.isShown()) {
                tr.removeClass('details');
                row.child.hide();

                // Remove from the 'open' array
                detailRows.splice(idx, 1);
            } else {
                tr.addClass('details');
                row.child(format(row.data())).show();

                // Add to the 'open' array
                if (idx === -1) {
                    detailRows.push(tr.attr('id'));
                }
            }
        });

        // On each draw, loop over the `detailRows` array and show any child rows
        dt.on('draw', function () {
            $.each(detailRows, function (i, id) {
                $('#' + id + ' td').trigger('click');
            });
        });
    });
</script>
</body>
</html>
