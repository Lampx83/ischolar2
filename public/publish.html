<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>

    <script src="./js/jsmind.js"></script>
    <script src="./js/jsmind.draggable.js"></script>
    <script src="./js/jsmind.screenshot.js"></script>
    <script src="./js/jquery.min.js"></script>
    <link type="text/css" rel="stylesheet" href="./css/jsmind.css"/>

    <link type="text/css" rel="stylesheet" href="https://cdn.datatables.net/1.11.4/css/jquery.dataTables.min.css"/>
    <link type="text/css" rel="stylesheet" href="https://cdn.datatables.net/scroller/2.0.5/css/scroller.dataTables.min.css"/>


    <link rel="stylesheet"
          href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
    <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link href="./css/bootstrap.css" rel="stylesheet"/>
    <link href="./css/main.css" rel="stylesheet"/>
    <link href="./css/login-register.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="./css/chat.css" rel="stylesheet"/>
    <script type="text/javascript" src="./js/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

</head>
<body>


<nav class="navbar navbar-expand-sm navbar-dark bg-dark" id="header">
    <a class="navbar-brand" href="#">
        <img src="../src/assets/images/graduation.svg" width="30" height="30" class="mr-2" th:src="@{../images/graduation.svg}"/>iScholar
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button"
                   data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">File</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item" href="#" id="dropdown-item-new" onclick="new_map();"><span
                            th:text="#{New}">New</span></a>
                    <input id="file_input" style="display: none" type="file" onchange="open_file()"/>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#" onclick="download_file();"><span th:text="#{Export}">Export</span></a>
                    <a class="dropdown-item" href="#" id="upload_link"><span th:text="#{Import}"></span>Import</a>
                    <a class="dropdown-item" href="#" onclick="screen_shot();"><span
                            th:text="#{Screenshot}">Screenshot</span></a>
                </div>
            </li>

            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown3" role="button"
                   data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span th:text="#{View}">View</span>
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown3">
                    <a class="dropdown-item" href="#" onclick="zoomIn()"><span th:text="#{Zoom_in}">Zoom in</span></a>
                    <a class="dropdown-item" href="#" onclick="zoomOut()"><span
                            th:text="#{Zoom_out}">Zoom out </span></a>
                </div>
            </li>

            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown4" role="button"
                   data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span th:text="#{View}">Publish</span>
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown3">
                    <a class="dropdown-item" href="?c=s">Scopus</a>
                    <!--                    <a class="dropdown-item" href="?c=v">Local Journals</a>-->
                    <!--                    <a class="dropdown-item" href="?c=c">Top Conferences</a>-->
                </div>
            </li>
        </ul>


        <ul class="navbar-nav ms-auto ">

            <button id="btnRoom" type="button" class="btn btn-primary ml-2 user d-none" data-bs-toggle="collapse" data-bs-target="#collapse-online">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill"
                     viewBox="0 0 16 16">
                    <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                    <path fill-rule="evenodd"
                          d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"/>
                    <path d="M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
                </svg>
                <span class="hideSmall">Chat room</span> <span class="badge badge-secondary bg-secondary"
                                                               id="numOnline">0</span>
            </button>


            <button id="btnLogin" type="button" class="btn btn-primary me-auto">Đăng nhập</button>
            <div class="dropdown">
                <img class="ms-2 rounded-circle user d-none p-1 profilePicture" id="profilePicture" width="41px"
                     height="41px" data-bs-toggle="dropdown" data-offset="-90,20">
                <a href="#" data-bs-toggle="dropdown" data-offset="-90,20" class="profilePicture">
                    <div class="ms-2 userName user d-none"></div>
                </a>
                <div class="dropdown-menu shadow-sm dropdown-menu-profile">
                    <div class="profile-info">
                        <span id="profileName" class="text-primary"></span>
                        <span id="profileEmail"></span>
                    </div>
                    <div class="list-group list-group-flush">
                        <a href="/mylabs" class="list-group-item list-group-item-action">Lab của tôi</a>
                        <a href="#" class="list-group-item list-group-item-action text-danger" id="signout">Đăng xuất</a>
                    </div>
                </div>

            </div>
        </ul>

    </div>
</nav>

<div class="row m-0">
    <div class="col-md-12 pt-5 pb-5">
        <table id="example" class="display" style="width:100%">
            <thead>
            <tr>
                <th>Quartile</th>
                <th>Title</th>
                <th>Category</th>
                <th>Publisher</th>
                <th>Cite Score</th>
            </tr>
            </thead>
            <tfoot>
            <tr>
                <th>Quartile</th>
                <th>Title</th>
                <th>Category</th>
                <th>Publisher</th>
                <th>Cite Score</th>
            </tr>
            </tfoot>
        </table>
    </div>
    <!--    <div class="col-md-3 bg-light border-left pt-2" id="rightpanel">-->
    <!--    </div>-->
</div>

<footer class="text-center text-lg-start bg-light text-muted">
    <!-- Section: Social media -->
    <section class="d-flex justify-content-center justify-content-lg-between p-2 border-top">
        <div class="container text-center text-md-start mt-4 mb-4">
            <!-- Grid row -->
            <div class="row">
                <!-- Grid column -->
                <div class="col-md-2">
                    <img src="../src/assets/images/graduation.svg" width="70" height="70" th:src="@{../images/graduation.svg}"/>
                    <h5>
                        iScholar
                    </h5>
                </div>

                <!-- Grid column -->
                <div class="row col-md-3 align-items-center"><i>"Helpful tool for brainstorming, planning, and
                    writing..."</i>
                </div>
                <!-- Grid column -->
                <div class="col-md-3">
                    <h6 class="text-uppercase fw-bold mb-4">Help</h6>
                    <a href="#!" class="text-reset">Paper</a></br>
                    <a href="#!" class="text-reset">Dissertation</a></br>
                </div>
                <!-- Grid column -->
                <div class="col-md-3">
                    <h6 class="text-uppercase fw-bold mb-4">Language </h6>
                    <a href="#!" class="text-reset">English</a></br>
                    <a href="#!" class="text-reset">Vietnamese</a></br>
                </div>
                <!-- Grid column -->
            </div>
            <!-- Grid row -->
        </div>
    </section>
    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.05);">© 2021 Copyright <a
            class="text-reset fw-bold" href="https://ischolar.com/">iScholar.com</a></div>
</footer>


<script> var page = "map" </script>


<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-firestore.js"></script>

<script src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/scroller/2.0.5/js/dataTables.scroller.min.js"></script>

<script src="./js/bootstrap.bundle.js"></script>
<!--<script src="./js/user.js"></script>-->
<!--<script src="./js/map.js"></script>-->
<!--<script src="./js/template.js"></script>-->

<script>
    function format(d) {
        let t = ["Quartile","Title", "Scopus Sub-Subject Area", "Publisher","CiteScore 2020", "E-ISSN", "Open Access", "Percent Cited", "Percentile",  "RANK", "SJR", "SNIP", "Scholarly Output", "Scopus ASJC Code (Sub-subject Area)", "Scopus Source ID", "Top 10% (CiteScore Percentile)", "URL Scopus Source ID", "Homepage", "Contact", "How_to_publish"]
        let s = "";

        for (let i = 4; i < d.length; i++) {
            if (d[i])
                s = s + t[i] + ': ' + d[i] + ' <br>'
        }

        return s

    }

    $(document).ready(function () {
        $('#example tfoot th').each(function () {
            var title = $(this).text();
            $(this).html('<input type="text" placeholder="Search ' + title + '" />');
        });
        const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
        });

        var dt = $('#example').DataTable({
            "processing": true,
            "serverSide": true,
            "ajax": {
               url: "https://vncodelab.com/api/v1/test?c=" + params.c,
              //  url: "https://localhost/api/v1/test?c=" + params.c,
                type: "POST",
                contentType: "application/json",
                data: function (d) {
                    return JSON.stringify(d)
                }
            },
            initComplete: function () {
                // Apply the search
                this.api().columns().every(function () {
                    var that = this;
                    $('input', this.footer()).on('keyup change', function (e) {
                        if (that.search() !== this.value) that.search(this.value);
                        // if serverside draw() only on enter
                        if (e.keyCode == 13) that.draw();
                    });
                });
            }
            //"ajax": "https://vncodelab.com/api/v1/test"
        });
        // Array to track the ids of the details displayed rows
        var detailRows = [];

        $('#example tbody').on('click', 'tr td', function () {
            var tr = $(this).closest('tr');
            var row = dt.row(tr);
            var idx = $.inArray(tr.attr('id'), detailRows);

            if (row.child.isShown()) {
                tr.removeClass('details');
                row.child.hide();

                // Remove from the 'open' array
                detailRows.splice(idx, 1);
            } else {
                tr.addClass('details');
                row.child(format(row.data())).show();

                // Add to the 'open' array
                if (idx === -1) {
                    detailRows.push(tr.attr('id'));
                }
            }
        });

        // On each draw, loop over the `detailRows` array and show any child rows
        dt.on('draw', function () {
            $.each(detailRows, function (i, id) {
                $('#' + id + ' td').trigger('click');
            });
        });
    });
</script>
</body>
</html>
